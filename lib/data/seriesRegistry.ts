import { SeriesConfig } from './types';

// Consolidated series registry for all data providers
// To add a new series:
// 1. Add config here with provider, sourceId, and cache settings
// 2. That's it! The unified API endpoint handles the rest

export const SERIES_REGISTRY: Record<string, SeriesConfig> = {
  // === FRED Series ===

  // Affordability Indicators
  mortgage_rates: {
    id: 'mortgage_rates',
    provider: 'fred',
    sourceId: 'MORTGAGE30US',
    frequency: 'weekly',
    staleAfterHours: 168,  // 7 days
    cacheFile: 'fred/mortgage_rates.csv',
    title: '30-Year Mortgage Rate',
    description: 'Weekly average 30-year fixed mortgage rate',
    unit: '%',
    valueColumn: 'rate',
  },
  interest_rates: {
    id: 'interest_rates',
    provider: 'fred',
    sourceId: 'FEDFUNDS',
    frequency: 'monthly',
    staleAfterHours: 720,  // 30 days
    cacheFile: 'fred/interest_rates.csv',
    title: 'Federal Funds Rate',
    description: 'Federal Reserve interest rate target',
    unit: '%',
    valueColumn: 'rate',
  },
  housing_prices_case_shiller: {
    id: 'housing_prices_case_shiller',
    provider: 'fred',
    sourceId: 'CSUSHPISA',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/housing_prices_case_shiller.csv',
    title: 'Case-Shiller Home Prices',
    description: 'S&P/Case-Shiller U.S. National Home Price Index',
    unit: 'Index',
    valueColumn: 'index',
  },
  housing_affordability: {
    id: 'housing_affordability',
    provider: 'fred',
    sourceId: 'FIXHAI',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/housing_affordability.csv',
    title: 'Housing Affordability Index',
    description: 'NAR Housing Affordability Index',
    unit: 'Index',
    valueColumn: 'index',
  },
  customs_duties: {
    id: 'customs_duties',
    provider: 'fred',
    sourceId: 'B235RC1Q027SBEA',
    frequency: 'quarterly',
    staleAfterHours: 720,  // 30 days
    cacheFile: 'fred/customs_duties.csv',
    title: 'Customs Duties (Tariffs)',
    description: 'Federal tariff revenue collections',
    unit: 'B$',
    valueColumn: 'receipts',
  },

  // Liquidity Indicators
  housing_starts: {
    id: 'housing_starts',
    provider: 'fred',
    sourceId: 'HOUST',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/housing_starts.csv',
    title: 'Housing Starts',
    description: 'Total new residential construction starts',
    unit: 'K',
    valueColumn: 'starts',
  },
  housing_starts_single_family: {
    id: 'housing_starts_single_family',
    provider: 'fred',
    sourceId: 'HOUST1F',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/housing_starts_single_family.csv',
    title: 'Single-Family Starts',
    description: 'Single-family residential construction starts',
    unit: 'K',
    valueColumn: 'starts',
  },
  building_permits: {
    id: 'building_permits',
    provider: 'fred',
    sourceId: 'PERMIT',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/building_permits.csv',
    title: 'Building Permits',
    description: 'New residential building permits issued',
    unit: 'K',
    valueColumn: 'permits',
  },
  existing_home_sales: {
    id: 'existing_home_sales',
    provider: 'fred',
    sourceId: 'EXHOSLUSM495S',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/existing_home_sales.csv',
    title: 'Existing Home Sales',
    description: 'Existing home sales volume',
    unit: 'M',
    valueColumn: 'sales',
  },

  // Consumer Willingness Indicators
  unemployment_rate: {
    id: 'unemployment_rate',
    provider: 'fred',
    sourceId: 'UNRATE',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/unemployment_rate.csv',
    title: 'Unemployment Rate',
    description: 'U.S. national unemployment rate',
    unit: '%',
    valueColumn: 'rate',
  },
  nonfarm_payrolls: {
    id: 'nonfarm_payrolls',
    provider: 'fred',
    sourceId: 'PAYEMS',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/nonfarm_payrolls.csv',
    title: 'Nonfarm Payrolls',
    description: 'Total nonfarm employment levels',
    unit: 'K',
    valueColumn: 'employment',
  },
  economic_policy_uncertainty: {
    id: 'economic_policy_uncertainty',
    provider: 'fred',
    sourceId: 'USEPUINDXM',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/economic_policy_uncertainty.csv',
    title: 'Economic Policy Uncertainty',
    description: 'Economic Policy Uncertainty Index',
    unit: 'Index',
    valueColumn: 'index',
  },
  trade_policy_uncertainty: {
    id: 'trade_policy_uncertainty',
    provider: 'fred',
    sourceId: 'EPUTRADE',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/trade_policy_uncertainty.csv',
    title: 'Trade Policy Uncertainty',
    description: 'Trade Policy Uncertainty Index',
    unit: 'Index',
    valueColumn: 'index',
  },
  vix: {
    id: 'vix',
    provider: 'fred',
    sourceId: 'VIXCLS',
    frequency: 'daily',
    staleAfterHours: 24,  // 1 day
    cacheFile: 'fred/vix.csv',
    title: 'VIX',
    description: 'CBOE Volatility Index (market fear gauge)',
    unit: 'Index',
    valueColumn: 'vix',
  },

  // Additional FRED series (from notebook)
  travel_leisure: {
    id: 'travel_leisure',
    provider: 'fred',
    sourceId: 'NASDAQNQUSL4050',
    frequency: 'daily',
    staleAfterHours: 24,
    cacheFile: 'fred/travel_leisure.csv',
    title: 'Travel & Leisure Index',
    description: 'NASDAQ Travel & Leisure Index',
    unit: 'Index',
    valueColumn: 'rate',
  },
  headline_inflation: {
    id: 'headline_inflation',
    provider: 'fred',
    sourceId: 'CPIAUCSL',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/headline_inflation.csv',
    title: 'Headline Inflation',
    description: 'Consumer Price Index for All Urban Consumers',
    unit: 'Index',
    valueColumn: 'rate',
  },
  core_inflation: {
    id: 'core_inflation',
    provider: 'fred',
    sourceId: 'CPILFESL',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/core_inflation.csv',
    title: 'Core Inflation',
    description: 'CPI Less Food and Energy',
    unit: 'Index',
    valueColumn: 'rate',
  },
  personal_consumption_expenditure: {
    id: 'personal_consumption_expenditure',
    provider: 'fred',
    sourceId: 'PCEPI',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/personal_consumption_expenditure.csv',
    title: 'Personal Consumption Expenditure',
    description: 'PCE Price Index',
    unit: 'Index',
    valueColumn: 'rate',
  },
  consumer_credit: {
    id: 'consumer_credit',
    provider: 'fred',
    sourceId: 'TOTALSL',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/consumer_credit.csv',
    title: 'Consumer Credit',
    description: 'Total Consumer Credit Outstanding',
    unit: 'B$',
    valueColumn: 'credit',
  },
  credit_card_rate: {
    id: 'credit_card_rate',
    provider: 'fred',
    sourceId: 'TERMCBCCALLNS',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/credit_card_rate.csv',
    title: 'Credit Card Interest Rate',
    description: 'Commercial Bank Credit Card Interest Rate',
    unit: '%',
    valueColumn: 'rate',
  },
  auto_loan_rate: {
    id: 'auto_loan_rate',
    provider: 'fred',
    sourceId: 'RIFLPBCIANM60NM',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/auto_loan_rate.csv',
    title: 'Auto Loan Rate',
    description: 'Finance Rate on New Car Loans (60-Month)',
    unit: '%',
    valueColumn: 'rate',
  },
  tax_policy_uncertainty: {
    id: 'tax_policy_uncertainty',
    provider: 'fred',
    sourceId: 'EPUTAXES',
    frequency: 'monthly',
    staleAfterHours: 720,
    cacheFile: 'fred/tax_policy_uncertainty.csv',
    title: 'Tax Policy Uncertainty',
    description: 'Tax Policy Uncertainty Index',
    unit: 'Index',
    valueColumn: 'index',
  },
  dollar_index_broad: {
    id: 'dollar_index_broad',
    provider: 'fred',
    sourceId: 'DTWEXBGS',
    frequency: 'daily',
    staleAfterHours: 24,
    cacheFile: 'fred/dollar_index_broad.csv',
    title: 'U.S. Dollar Index (Broad)',
    description: 'Trade Weighted U.S. Dollar Index (Broad)',
    unit: 'Index',
    valueColumn: 'index',
  },

  // === Future: Zillow Series ===
  // zillow_home_prices: {
  //   id: 'zillow_home_prices',
  //   provider: 'zillow',
  //   sourceId: 'ZHVI',
  //   frequency: 'monthly',
  //   staleAfterHours: 720,
  //   cacheFile: 'zillow/zhvi.csv',
  //   title: 'Zillow Home Value Index',
  //   description: 'Zillow Home Value Index',
  //   unit: '$',
  //   valueColumn: 'value',
  // },
};

// Get all series IDs
export const SERIES_IDS = Object.keys(SERIES_REGISTRY);

// Get config for a specific series
export function getSeriesConfig(seriesId: string): SeriesConfig | undefined {
  return SERIES_REGISTRY[seriesId];
}

// Get all series for a specific provider
export function getSeriesByProvider(provider: string): SeriesConfig[] {
  return Object.values(SERIES_REGISTRY).filter(s => s.provider === provider);
}
